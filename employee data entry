#This program allows a user to view and modify a JSON database of employee records
#via a text console.
  
import json
employee_roster = "employee_records.json"

#This function presents a list of options for users.
def choices():
    print("EMPLOYEE DATABASE OPTIONS:")
    print("(1) View Employee Records")
    print("(2) Add New Employee")
    print("(3) Edit Employee")
    print("(4) Remove Employee")
    print("(5) Exit")

#This function show all employee records in a formatted list with a break between each.
#An index number is assigned to each record based on its position in the list for the
#user to select when modifying the roster.
def view_roster():
    print("\n\nEMPLOYEE RECORDS\n")
    with open (employee_roster, "r") as f:
      temp = json.load(f)
      i = 1
      for entry in temp:
        employee_id = entry["employee_id"]
        employee_lastname = entry["employee_lastname"]
        employee_firstname = entry["employee_firstname"]
        employee_hourlyrate = entry["employee_hourlyrate"]
        employee_dependents = entry["employee_dependents"]
        employee_hoursworked = entry["employee_hoursworked"]
        print (f"Index Number: {i}")
        print (f"Employee ID:       {employee_id}")
        print (f"Last Name:         {employee_lastname}")
        print (f"First Name:        {employee_firstname}")
        print (f"Hourly Wage:       {employee_hourlyrate}")
        print (f"No. of Dependents: {employee_dependents}")
        print (f"Hours this period: {employee_hoursworked}")
        print ("\n")
        i = i + 1

#This function prompts the user to enter a new employee record.
def add_record():
    item_data = {}
    with open(employee_roster, "r") as f:
        temp = json.load(f)
        item_data["employee_id"] = input("New Employee's ID: ")
        item_data["employee_lastname"] = input("New Employee's Last Name: ")
        item_data["employee_firstname"] = input("New Employee's First Name: ")
        item_data["employee_hourlyrate"] = float(input("Employee's Hourly Rate: "))
        item_data["employee_dependents"] = int(input("Employee's No of Dependents: "))
        item_data["employee_hoursworked"] = float(input("Hours Worked this period: "))
        temp.append(item_data)
    with open (employee_roster, "w") as f:
        json.dump(temp, f, indent=4)

#This function prompts the user to edit an employee record from the list
#by selecting its index number.
def edit_record():
    view_roster()
    new_data = []
    with open(employee_roster, "r") as f:
        temp = json.load(f)
        data_length = len(temp)-1
    print ("Please select the index number of the record you wish to delete: ")
    editing_selection = input(f"Select a number 1-{data_length + 1}: ")
    i=1
    for entry in temp:
        if i == int(editing_selection):
          employee_id = entry["employee_id"]
          employee_lastname = entry["employee_lastname"]
          employee_firstname = entry["employee_firstname"]
          employee_hourlyrate = entry["employee_hourlyrate"]
          employee_dependents = entry["employee_dependents"]
          employee_hoursworked = entry["employee_hoursworked"]
          print (f"Index Number: {i}")
          print (f"Current Employee ID: {employee_id}")
          employee_id = input("Enter Employee's Updated ID: ")
          print (f"Current Last Name: {employee_lastname}")
          employee_lastname = input("Enter Employee's Updated Last Name: ")
          print (f"Current First Name: {employee_firstname}")
          employee_firstname = input("Enter Employee's Updated First Name: ")
          print (f"Current Hourly Wage: {employee_hourlyrate}")
          employee_hourlyrate = float(input("Enter Employee's Updated Hourly Rate: "))
          print (f"Current No. of Dependents: {employee_dependents}")
          employee_dependents = int(input(
              "Enter Employee's Updated No of Dependents: "
          ))
          print (f"Current Hours this period: {employee_hoursworked}")
          employee_hoursworked = float(input(
              "Enter Employee's Updated Hours Worked this period: "
          ))
          new_data.append({
              "employee_id": employee_id,
              "employee_lastname": employee_lastname,
              "employee_firstname": employee_firstname,
              "employee_hourlyrate": employee_hourlyrate,
              "employee_dependents": employee_dependents,
              "employee_hoursworked": employee_hoursworked
          })
          i=i+1
        else:
          new_data.append(entry)
          i=i+1
    with open (employee_roster, "w") as f:
        json.dump(new_data, f, indent=4)
  


#This function prompts the user to delete an employee record from the list
#by selecting its index number.
def delete_record():
    view_roster()
    new_data = []
    with open(employee_roster, "r") as f:
        temp = json.load(f)
        data_length = len(temp)-1
    print ("Please select the index number of the record you wish to delete: ")
    deletion_selection = input(f"Select a number 1-{data_length + 1}: ")
    i=1
    for entry in temp:
        if i == int(deletion_selection):
          pass
          i=i+1
        else:
          new_data.append(entry)
          i=i+1
    with open (employee_roster, "w") as f:
        json.dump(new_data, f, indent=4)
  
  
#A loop that reads user input and executes a function for each. 
while True:
  choices()
  choice = input("\nEnter Number: ")
  if choice == "1":
    view_roster()
  elif choice == ("2"):
    add_record()  
  elif choice == ("3"):
    edit_record()
  elif choice == ("4"):
    delete_record()  
  elif choice == ("5"):
    break
  else: 
    print ("Please make a selection from 1-5")





  
